plugins {
    id 'swift-executable'
    id 'xcode'
}

def greeterLib = file('../simple-library/build/lib/main/debug/libgreeter.dylib')
def greeterImportPath = file('../simple-library/build/obj/main/debug')

compileDebugSwift.doFirst {
    if (!greeterLib.exists() || !greeterImportPath.exists()) {
        throw new GradleException("Please build project at ${file('../simple-library')}.")
    }
}

dependencies {
    nativeLinkDebug files(greeterLib)
    nativeRuntimeDebug files(greeterLib)
    swiftImportDebug files(greeterImportPath)
}
